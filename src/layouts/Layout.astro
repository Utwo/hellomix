---
import "../styles/global.css";
import logo from "../assets/img/logo.svg";

interface Props {
  title?: string;
  description?: string;
}

const { title = "Hello mix", description = "discover, play, and vibe" } =
  Astro.props;

// Determine active page based on current URL
const currentPath = Astro.url.pathname;
const isHomePage = currentPath === "/";
const isAboutPage = currentPath === "/about";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="color-scheme" content="light dark" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={description} />
    <title>{title}</title>
    <link rel="dns-prefetch" href="https://www.youtube.com/iframe_api" />
    <script is:inline src="/js/piecon.js"></script>
  </head>
  <body>
    <header>
      <div>
        <a href="/" class="logo">
          <img src={logo.src} alt="Hello mix" />
        </a>
        <nav>
          <a
            href="/"
            class={isHomePage ? "active" : ""}
            title="All"
            aria-label="All playlists"
          >
            <svg
              width="24"
              height="24"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="2"
                y="2"
                width="6"
                height="6"
                rx="1"
                stroke="currentColor"
                stroke-width="1.5"
                fill="none"></rect>
              <rect
                x="12"
                y="2"
                width="6"
                height="6"
                rx="1"
                stroke="currentColor"
                stroke-width="1.5"
                fill="none"></rect>
              <rect
                x="2"
                y="12"
                width="6"
                height="6"
                rx="1"
                stroke="currentColor"
                stroke-width="1.5"
                fill="none"></rect>
              <rect
                x="12"
                y="12"
                width="6"
                height="6"
                rx="1"
                stroke="currentColor"
                stroke-width="1.5"
                fill="none"></rect>
            </svg>
          </a>
          <a href="/?shuffle" title="Shuffle" aria-label="Shuffle playlists">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M16.7751 9.79734C16.4792 10.0873 16.4744 10.5621 16.7643 10.8579C17.0543 11.1538 17.5291 11.1586 17.8249 10.8687L16.7751 9.79734ZM19.5249 9.20266C19.8208 8.91274 19.8256 8.43789 19.5357 8.14205C19.2457 7.84622 18.7709 7.84142 18.4751 8.13134L19.5249 9.20266ZM18.4749 9.2025C18.7706 9.49251 19.2455 9.48786 19.5355 9.19211C19.8255 8.89636 19.8209 8.42151 19.5251 8.1315L18.4749 9.2025ZM17.8251 6.4645C17.5294 6.17449 17.0545 6.17914 16.7645 6.47489C16.4745 6.77064 16.4791 7.24549 16.7749 7.5355L17.8251 6.4645ZM18.9735 9.41653C19.3875 9.43115 19.7349 9.10742 19.7495 8.69346C19.7641 8.27951 19.4404 7.93208 19.0265 7.91747L18.9735 9.41653ZM5 14.583C4.58579 14.583 4.25 14.9188 4.25 15.333C4.25 15.7472 4.58579 16.083 5 16.083V14.583ZM17.8249 13.1313C17.5291 12.8414 17.0543 12.8462 16.7643 13.1421C16.4744 13.4379 16.4792 13.9127 16.7751 14.2027L17.8249 13.1313ZM18.4751 15.8687C18.7709 16.1586 19.2457 16.1538 19.5357 15.8579C19.8256 15.5621 19.8208 15.0873 19.5249 14.7973L18.4751 15.8687ZM19.5251 15.8685C19.8209 15.5785 19.8255 15.1036 19.5355 14.8079C19.2455 14.5121 18.7706 14.5075 18.4749 14.7975L19.5251 15.8685ZM16.7749 16.4645C16.4791 16.7545 16.4745 17.2294 16.7645 17.5251C17.0545 17.8209 17.5294 17.8255 17.8251 17.5355L16.7749 16.4645ZM19.0265 16.0825C19.4404 16.0679 19.7641 15.7205 19.7495 15.3065C19.7349 14.8926 19.3875 14.5689 18.9735 14.5835L19.0265 16.0825ZM5 7.917C4.58579 7.917 4.25 8.25279 4.25 8.667C4.25 9.08121 4.58579 9.417 5 9.417V7.917ZM17.8249 10.8687L19.5249 9.20266L18.4751 8.13134L16.7751 9.79734L17.8249 10.8687ZM19.5251 8.1315L17.8251 6.4645L16.7749 7.5355L18.4749 9.2025L19.5251 8.1315ZM19.0265 7.91747C16.0086 7.81093 13.9537 8.17906 12.4743 8.84951C10.9717 9.53046 10.1311 10.4927 9.49687 11.4203C9.21681 11.83 8.89561 12.3629 8.67258 12.7002C8.41581 13.0886 8.16957 13.414 7.8797 13.6833C7.33706 14.1873 6.54721 14.583 5 14.583V16.083C6.84679 16.083 8.02744 15.5933 8.90055 14.7823C9.31855 14.394 9.6415 13.9545 9.92383 13.5275C10.2399 13.0495 10.4277 12.7166 10.7351 12.2669C11.2759 11.476 11.9243 10.7456 13.0935 10.2158C14.2858 9.67544 16.0854 9.31457 18.9735 9.41653L19.0265 7.91747ZM16.7751 14.2027L18.4751 15.8687L19.5249 14.7973L17.8249 13.1313L16.7751 14.2027ZM18.4749 14.7975L16.7749 16.4645L17.8251 17.5355L19.5251 15.8685L18.4749 14.7975ZM18.9735 14.5835C16.0854 14.6854 14.2858 14.3246 13.0935 13.7842C11.9243 13.2544 11.2759 12.524 10.7351 11.7331C10.4277 11.2834 10.2399 10.9505 9.92383 10.4725C9.6415 10.0455 9.31855 9.60595 8.90055 9.21769C8.02744 8.4067 6.84679 7.917 5 7.917V9.417C6.54721 9.417 7.33706 9.81268 7.8797 10.3167C8.16957 10.586 8.41581 10.9114 8.67258 11.2998C8.89561 11.6371 9.21681 12.17 9.49687 12.5797C10.1311 13.5073 10.9717 14.4695 12.4743 15.1505C13.9537 15.8209 16.0086 16.1891 19.0265 16.0825L18.9735 14.5835Z"
                fill="currentColor"></path>
            </svg>
          </a>
          <a
            href="/about"
            class={isAboutPage ? "active" : ""}
            title="About"
            aria-label="About"
          >
            <svg
              width="24"
              height="24"
              viewBox="0 0 20 20"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M10 5L15 15H5L10 5Z"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linejoin="round"
                fill="none"></path>
            </svg>
          </a>
        </nav>
      </div>
      <h2># {description} #</h2>
    </header>
    <slot />
  </body>
</html>

<style>
  /* Modern, simplified design */
  * {
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      "Helvetica Neue", Arial, sans-serif;
    line-height: 1.6;
  }

  header {
    padding: 2rem 0;
    margin-bottom: 3rem;
  }

  header div {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
  }

  header .logo {
    flex-shrink: 0;
  }

  header .logo img {
    max-width: 200px;
    height: auto;
  }

  header nav {
    display: flex;
    gap: 1rem;
    margin: 0;
    width: auto;
  }

  header nav a {
    border-radius: 8px;
    font-size: 1rem;
    transition: all 0.2s ease;
    border: none;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
  }

  header nav a svg {
    width: 24px;
    height: 24px;
    display: block;
  }

  header h2 {
    text-align: center;
    font-size: 0.9rem;
    font-weight: 400;
    letter-spacing: 2px;
    margin: 2rem 0 0;
    padding: 0;
    background: transparent;
    border-radius: 0;
    animation: none;
  }

  @media (max-width: 768px) {
    header div {
      flex-direction: column;
      align-items: flex-start;
      gap: 1.5rem;
    }

    header nav {
      width: 100%;
      justify-content: flex-start;
    }
  }

  /* Dark/Light theme based on device preferences */
  @media (prefers-color-scheme: dark) {
    html {
      background: #0a0a0a !important;
    }

    body {
      color: #e5e5e5 !important;
      background: #0a0a0a !important;
    }

    header div {
      background: transparent !important;
      border-bottom: none !important;
    }

    header h2 {
      color: #888 !important;
      background: transparent !important;
    }

    header nav a {
      color: #ccc !important;
      background: rgba(255, 255, 255, 0.05) !important;
    }

    header nav a:hover {
      background: rgba(255, 255, 255, 0.1) !important;
      color: #fff !important;
    }

    header nav .active {
      background: #fff007 !important;
      color: #0a0a0a !important;
    }
  }

  @media (prefers-color-scheme: light) {
    html {
      background: #ffffff !important;
    }

    body {
      color: #1a1a1a !important;
      background: #ffffff !important;
    }

    header div {
      background: transparent !important;
      border-bottom: none !important;
    }

    header h2 {
      color: #666 !important;
      background: transparent !important;
    }

    header nav a {
      color: #666 !important;
      background: rgba(0, 0, 0, 0.04) !important;
    }

    header nav a:hover {
      background: rgba(0, 0, 0, 0.08) !important;
      color: #1a1a1a !important;
    }

    header nav .active {
      background: #fff007 !important;
      color: #1a1a1a !important;
    }
  }
</style>
